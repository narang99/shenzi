# Shenzi Manifest

The Shenzi manifest file is a JSON file which contains all the information that `shenzi` intercepted from your python environment. It is automatically generated by `shenzi.discover.shenzi_init_discovery`.  
This file contains many absolute paths, it  can't be moved between systems, ideally you should run `shenzi build` on this file the moment you stop interception.  


Although this is a JSON file, I've written at as a python dict (comments in JSON in github markdown look weird)
```python
# all paths are absolute paths
{
    "skip": {
        "prefixes": [
            # list of absolute paths, shenzi would ignore these paths recursively, they won't be copied to the dist folder
            # as an example, ignoring `pygraphviz` module fully
            # you can also pass module names in `shenzi_init_discovery`, like `shenzi_init_discovery(["pygraphviz"])`
            # the python library would try to find `pygraphviz` on your path and add it to skip list if found
            "<absolute-path-to-my-site-packages>/pygraphviz"
        ],
        "libs": [
            # names of shared libraries to ignore
            # any library which has this name would be skipped
            # just names, no paths here. no absolute paths too
            "graphviz.so"
        ],
    },
    "loads": [
        # all libraries which were loaded using `dlopen` or were python extension modules
        # example, you can add an entry like this if `shenzi` misses some library
        {
            "kind": "dlopen",
            "path": "<absolute-path-to-shared-library.so>"
        }
    ],
    "libs": [
        # in mac, this is the list of ALL libraries that the linker loaded during interception
    ],
    "env": {
        # os.environ
    },
    "python": {
        "sys": {
            # information from python sys module
            "prefix": "<path-to-sys.prefix>",
            "exec_prefix": "<path-to-sys.exec_prefix>",
            "platlibdir": "<path-to-sys.platlibdir>",
            "version": {
                "major": 3,
                "minor": 9,
                "abi_thread": "",
            },
            "path": [
                # all absolute paths in `sys.path`
            ],
            "executable": "<path-to-python-interpreter-from-sys.executable>",
        },
        "main": "<path-to-the-main-script>"
    }
}
```

## Editing the file
You would want to edit the file if:
- You want to skip shared libraries, or skip whole python modules
- `shenzi` missed adding some shared library (it failed to intercept the call that loaded it)


Skipping directories recursively
```json
{
    
    "skip": {
        "prefixes": [
            // list of absolute paths, shenzi would ignore these paths recursively, they won't be copied to the dist folder
            // as an example, ignoring `pygraphviz` module fully
            // you can also pass module names in `shenzi_init_discovery`, like `shenzi_init_discovery(["pygraphviz"])`
            // the python library would try to find `pygraphviz` on your path and add it to skip list if found
            "<absolute-path-to-my-site-packages>/pygraphviz",
        ],
    },
}
```

Skipping shared libraries using their names
```json
{
    "skip": {
        "libs": [
            // names of shared libraries to ignore
            // any library which has this name would be skipped
            // just names, no paths here. no absolute paths too
            "graphviz.so",
        ],
    },
}
```

Adding a library manually
```json
"loads": [
    ... // other entries added by shenzi automatically
    // all libraries which were loaded using `dlopen` or were python extension modules
    // example, you can add an entry like this if `shenzi` misses some library
    // append/prepend this entry, order does not matter
    {
        "kind": "dlopen",
        "path": "<absolute-path-to-shared-library.so>",
    }
],
```